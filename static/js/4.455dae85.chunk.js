(this["webpackJsonpreact-1"]=this["webpackJsonpreact-1"]||[]).push([[4],{295:function(e,a,s){e.exports={dialogs:"Dialogs_dialogs__37jdO",dialogsItems:"Dialogs_dialogsItems__1OitB",messagesWrapper:"Dialogs_messagesWrapper__2cdLT",selectUser:"Dialogs_selectUser__307n1",areaWrapper:"Dialogs_areaWrapper__sWMQo",textarea:"Dialogs_textarea__1aFI1",button:"Dialogs_button__12gTk",sendImg:"Dialogs_sendImg__2dilT",errorMsgAbs:"Dialogs_errorMsgAbs__1bPar"}},296:function(e,a,s){e.exports={ava:"DialogItem_ava__3qTgb",wrapper:"DialogItem_wrapper__2wIN-",dialogMessage:"DialogItem_dialogMessage__2R-gt",dialogName:"DialogItem_dialogName__3rWJg",dialog:"DialogItem_dialog__2J2z5",active:"DialogItem_active__2bAjO"}},297:function(e,a,s){e.exports={messages:"Message_messages__1HEEr",messageFromOwner:"Message_messageFromOwner__2Fr8c",messageWrapper:"Message_messageWrapper__zSbfZ",messageInner:"Message_messageInner__1lMz3",message:"Message_message__1VndY",ava:"Message_ava__t7ROW",name:"Message_name__1Y2lm"}},305:function(e,a,s){"use strict";s.r(a);var t=s(133),r=s(59),n=s(0),c=s(1),i=s.n(c),o=s(295),m=s.n(o),l=s(11),g=s(296),d=s.n(g),j=s(19),b=function(e){var a="/dialogs/".concat(e.id),s=e.name;return Object(n.jsx)("div",{children:Object(n.jsx)(j.b,{className:d.a.dialog,activeClassName:d.a.active,to:a,children:Object(n.jsxs)("div",{className:d.a.wrapper,onClick:e.afterSelectedChat,children:[Object(n.jsx)("img",{src:e.avaUrl,alt:"",className:d.a.ava}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:d.a.dialogName,children:s}),Object(n.jsx)("div",{className:d.a.dialogMessage,children:"message"})]})]})})})},u=s(297),_=s.n(u),O=function(e){return e.fromOwner?Object(n.jsxs)("div",{className:_.a.messageFromOwner,children:[Object(n.jsxs)("div",{className:_.a.messageInner,children:[Object(n.jsx)("div",{className:_.a.name,children:e.fromOwner?e.ownerName:e.name}),Object(n.jsx)("div",{className:_.a.message,children:e.message})]}),Object(n.jsx)("img",{className:_.a.ava,src:e.fromOwner?e.ownerAva:e.avaUrl,alt:"$"})]}):Object(n.jsxs)("div",{className:_.a.messageWrapper,children:[Object(n.jsx)("img",{className:_.a.ava,src:e.fromOwner?e.ownerAva:e.avaUrl,alt:"$"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:_.a.name,children:e.fromOwner?e.ownerName:e.name}),Object(n.jsx)("div",{className:_.a.message,children:e.message})]})]})},p=s(134),v=s(61),h=s(135),f=s(73),x=s(74),w=s.p+"static/media/send.1ed8f4b2.svg",N=s(60),I=Object(x.a)(100),M=Object(h.a)({form:"message",onSubmitSuccess:function(e,a){return a(Object(v.a)("message"))}})((function(e){return Object(n.jsxs)("form",{onSubmit:e.handleSubmit,className:m.a.areaWrapper,children:[Object(n.jsx)(p.a,{component:f.b,errorclass:m.a.errorMsgAbs,type:"text",validate:[x.b,I],name:"message",id:"message",cols:"10",rows:"50",placeholder:"write a message"}),Object(n.jsx)("button",{className:m.a.button,children:Object(n.jsx)("img",{className:m.a.sendImg,src:w,alt:"send"})})]})})),D=function(e){var a=i.a.useState(!!e.match.params.chatId),s=Object(r.a)(a,2),t=s[0],c=s[1],o=i.a.useState(e.match.params.chatId),g=Object(r.a)(o,2),d=g[0],j=g[1],u=i.a.useState(!1),_=Object(r.a)(u,2),p=_[0],v=_[1],h=e.dialogs[d-1],f=function(){c(!0)};i.a.useEffect((function(){c(!!e.match.params.chatId),j(e.match.params.chatId)}),[e.match.params.chatId]),i.a.useEffect((function(){return function(){v(!1)}}),[]);var x=e.dialogs.map((function(e){return Object(n.jsx)(b,{id:e.id,name:e.name,avaUrl:e.avaUrl,afterSelectedChat:f},e.id)})),w=e.messages.map((function(e){return Object(n.jsx)(O,{message:e.message,chatId:d,avaUrl:null===h||void 0===h?void 0:h.avaUrl,ownerAva:e.avaUrl,name:null===h||void 0===h?void 0:h.name,fromOwner:e.fromOwner,ownerName:e.name,isFromOwner:p},e.id)})),I=function(a){v(!0),e.sendMessage(a.message,e.owner.fullName,e.owner.photos.small||N.a)};return e.isAuth?Object(n.jsxs)("div",{className:m.a.dialogs,children:[Object(n.jsx)("div",{className:m.a.dialogsItems,children:x}),!t&&Object(n.jsx)("div",{className:m.a.messagesWrapper,children:Object(n.jsx)("div",{className:m.a.selectUser,children:"Select a chat to start messaging"})}),Object(n.jsx)(l.b,{path:"/dialogs/:chatId",render:function(){return Object(n.jsxs)("div",{className:m.a.messagesWrapper,children:[w,Object(n.jsx)(M,{onSubmit:I})]})}})]}):Object(n.jsx)(l.a,{to:"/login"})},W=s(15),S=s(3),A=s(39),U=s(40),F=s(42),k=s(41),C=function(e){return{isAuth:e.auth.isAuth}},P=s(9);a.default=Object(P.d)(l.f,Object(W.b)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages,newMessage:e.dialogsPage.newMessage,owner:e.profilePage.owner}}),(function(e){return{sendMessage:function(a,s,r){e(Object(t.a)(a,s,r))}}})),(function(e){var a=function(a){Object(F.a)(t,a);var s=Object(k.a)(t);function t(){return Object(A.a)(this,t),s.apply(this,arguments)}return Object(U.a)(t,[{key:"render",value:function(){return this.props.isAuth?Object(n.jsx)(e,Object(S.a)({},this.props)):Object(n.jsx)(l.a,{to:"/login"})}}]),t}(i.a.Component);return Object(W.b)(C)(a)}))(D)}}]);
//# sourceMappingURL=4.455dae85.chunk.js.map